# 2025-02-21-TIL

---

### 1. **게시판 삭제 기능 수정**
- 기존에 게시판 삭제 버튼은 `<button>` 태그로, `onclick` 이벤트를 통해 직접 URL로 삭제 요청을 전송하는 방식이었습니다. 하지만 이를 **폼**을 사용한 방식으로 수정하여, **POST** 방식으로 데이터를 전송하고, 페이지가 새로 고침되도록 처리하였습니다.
- 수정된 코드에서는 `boardId`를 `<input type="hidden">`으로 전송하여, 삭제 요청을 보다 안전하고 깔끔하게 처리할 수 있도록 했습니다.
  ```html
  <form method="POST" action="/BoardProject/board/delete">
      <input type="hidden" name="boardId" value="<%= content.getBoardId() %>">
      <button type="submit" class="btn btn-danger">삭제</button>
  </form>
  ```
  이렇게 수정하면 **스크립트를 사용하지 않고 서버 측에서 안전하게 처리**할 수 있으며, 클라이언트와 서버 간의 데이터 전송이 더 명확하고 직관적입니다.

---

### 2. **댓글 기능 개선**
#### **댓글 작성 및 추가**
- 댓글 작성 버튼을 클릭하면, 사용자가 작성한 댓글을 **AJAX** 요청으로 서버에 전송하고, **댓글 목록을 갱신**하는 기능을 구현했습니다.
- 요청이 성공하면 기존 댓글 목록을 **`empty()`** 메서드를 사용하여 비운 후, 새로운 댓글을 화면에 표시하도록 했습니다. 이는 **기존 댓글 목록을 갱신**하고 새로운 댓글을 추가하는 방식으로, UI가 더 깔끔하고 실시간 반영될 수 있도록 합니다.
  
  수정된 코드:
  ```javascript
  commentList.empty();  // 기존 댓글 비우기
  response.comments.forEach(comment => {
      // 새로운 댓글을 HTML로 추가
  });
  ```
- 댓글이 추가된 후 `textarea`를 빈 값으로 초기화하여 사용자가 **새로운 댓글을 쉽게 작성**할 수 있도록 했습니다.

#### **댓글 삭제**
- 댓글 삭제 기능은 각 댓글 옆에 **삭제 버튼**을 추가하여, 사용자가 **댓글을 삭제**할 수 있게 구현했습니다.
- 삭제 버튼을 클릭하면 **confirm()** 창을 띄워 사용자가 삭제 의도를 확인하고, **AJAX DELETE 요청**을 통해 해당 댓글을 서버에서 삭제한 후 화면에서 해당 댓글을 **fadeOut**하여 부드럽게 제거했습니다.
  
  댓글 삭제를 위한 AJAX 요청:
  ```javascript
  $.ajax({
      url: "board/comment",
      type: "DELETE",
      contentType: "application/json",  // 요청 헤더에 JSON 형식 지정
      data: JSON.stringify({ commentId: commentId, memberId: memberId }),
      success: function(response) {
          if (response.success) {
              $("div[data-comment-id='" + commentId + "']").fadeOut(300, function() {
                  $(this).remove();
              });
          } else {
              alert("댓글 삭제 실패!");
          }
      },
      error: function() {
          alert("서버 오류가 발생했습니다.");
      }
  });
  ```


---

### 3. **종합적인 개선**
- **UI/UX 개선**: 사용자가 게시글과 댓글을 관리하는 과정에서 더 직관적으로 이해할 수 있도록 버튼, 폼, AJAX 요청을 활용하여 삭제 및 추가 기능을 구현했습니다.
- **비동기 처리**: 댓글 작성 및 삭제 과정에서 페이지 새로 고침 없이 댓글 목록을 실시간으로 반영하도록 **AJAX**를 활용하여 사용자의 인터페이스가 원활하게 유지되도록 했습니다.

