```java
package booksearch;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import votest.vo.Book;

import java.net.URL;
import java.sql.*;
import java.util.ResourceBundle;

public class JavaFXTableViewController implements Initializable {


    private Connection con;

    @FXML
    private TableView<Book> tableView;

    @FXML
    private Button searchBtn;

    @FXML
    private MenuItem editMenuItem;  // "수정" 메뉴 추가

    @FXML
    private MenuItem deleteMenuItem;

    @FXML
    private TableColumn<Book, String> isbnCol;

    @FXML
    private TableColumn<Book, String> titleCol;

    @FXML
    private TableColumn<Book, Integer> priceCol;

    @FXML
    private TableColumn<Book, String> authorCol;

    @FXML
    private TextField inputField;



    @Override
    public void initialize(URL url, ResourceBundle resourceBundle) {
        // FXML이 LOAD될 때 메소드 호출!
        // button이 클릭되면 TableView에 데이터 넣어야 함

        // vo에 bisbn필드를 이용해서 값 채울 거임
        isbnCol.setCellValueFactory(new PropertyValueFactory<>("bisbn"));
        titleCol.setCellValueFactory(new PropertyValueFactory<>("btitle"));
        priceCol.setCellValueFactory(new PropertyValueFactory<>("bprice"));
        authorCol.setCellValueFactory(new PropertyValueFactory<>("bauthor"));

        searchBtn.setOnAction(event -> {
            getConnection();
            // input 받기
            String keyword = inputField.getText().strip();
            ObservableList<Book> books = search(keyword);
            closeConnection();

            // 화면 보여줌
            tableView.setItems(books);
        });


        // 삭제 버튼 이벤트 추가
        deleteMenuItem.setOnAction(event -> deleteSelectedRow());

        // 각 컬럼에 오른쪽 클릭으로 수정할 수 있는 기능 추가
        addDoubleClickEdit(titleCol, "책 제목");
        addDoubleClickEdit(priceCol, "책 가격");
        addDoubleClickEdit(authorCol, "책 저자");


    }

    private void getConnection() {
        try {
            Class.forName("oracle.jdbc.driver.OracleDriver"); // class가 존재하는지 확인!

            String JDBC_URL = "jdbc:oracle:thin:@localhost:1521:xe"; // jdbc:[db이름 종류]:[연결 방식]:[endpoint]:[db이름]
            String ID = "C##DEV";
            String PW = "1234";

            con = DriverManager.getConnection(JDBC_URL, ID, PW);
            System.out.println("Connection established");

        } catch (Exception e) {
            System.out.println("Connection Error occurs");
        }
    }

    private void closeConnection() {
        try {
            if (con != null) con.close();
            System.out.println("Connection close");
        } catch (SQLException e) {
            System.out.println("Connection close failed");
        }
    }

    /*
        검색 메소드
     */
    private ObservableList<Book> search(String keyword) {

        System.out.println("검색 시작");

        ObservableList<Book> books = FXCollections.observableArrayList();

        try {
            // 검색
            String sql = "SELECT bisbn, btitle, bprice, bauthor" +
                    " FROM book" +
                    " WHERE btitle LIKE ?";

            PreparedStatement pstmt = con.prepareStatement(sql);
            pstmt.setString(1, "%" + keyword + "%");

            // 결과 반환
            ResultSet rs = pstmt.executeQuery();

            while (rs.next()) {
                Book book = new Book(
                        rs.getString("bisbn"),
                        rs.getString("btitle"),
                        rs.getInt("bprice"),
                        rs.getString("bauthor")
                );

                books.add(book);
            }

            rs.close();
            pstmt.close();

            return books;

        } catch (SQLException e) {
           e.printStackTrace();
        } catch (NullPointerException e1) {
            System.out.println("NullPointerException Occurs");
        }

        return books;
    }

    // 선택된 행 삭제 메소드
    private void deleteSelectedRow() {
        Book selectedBook = tableView.getSelectionModel().getSelectedItem();
        if (selectedBook != null) {
            String bisbn = selectedBook.getBisbn();

            // DB연결 수
            getConnection();
            delete(bisbn);
            closeConnection();

            tableView.getItems().remove(selectedBook); // 삭제 완료 되면 View에서도 제거해주기

        }

    }

    private void update(String column, Object value, String isbn) {
        // ISBN이 null이 아니면 업데이트 진행
        if (isbn != null) {
            // 컬럼에 따라 업데이트할 쿼리 작성
            String sql = "UPDATE book SET " + column + " = ? WHERE bisbn = ?";

            try {
                getConnection();
                PreparedStatement pstmt = con.prepareStatement(sql);

                // 값 설정
                pstmt.setObject(1, value); // 첫 번째 ?에 값을 설정
                pstmt.setString(2, isbn);  // 두 번째 ?에 ISBN 값을 설정

                // SQL 쿼리 실행
                int rowsUpdated = pstmt.executeUpdate();

                if (rowsUpdated > 0) {
                    System.out.println("Record updated successfully");

                    // 선택된 Book 객체의 필드도 갱신
                    Book selectedBook = tableView.getSelectionModel().getSelectedItem();
                    if (selectedBook != null) {
                        if (column.equals("btitle")) {
                            selectedBook.setBtitle((String) value);
                        } else if (column.equals("bprice")) {
                            selectedBook.setBprice((Integer) value);
                        } else if (column.equals("bauthor")) {
                            selectedBook.setBauthor((String) value);
                        }
                    }

                    // TableView에 반영
                    tableView.refresh();
                }

                pstmt.close();
            } catch (SQLException e) {
                e.printStackTrace();
                showErrorDialog("업데이트 중 오류가 발생했습니다.");
            } finally {
                closeConnection();
            }
        }
    }


    private void delete(String bisbn) {
        try {
            // 검색
            String sql = "DELETE FROM book" +
                    " WHERE bisbn = ?";

            PreparedStatement pstmt = con.prepareStatement(sql);
            pstmt.setString(1, bisbn);

            // 결과 반환
            pstmt.executeUpdate();

            pstmt.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }

    }

    private <T> void addDoubleClickEdit(TableColumn<Book, T> column, String columnName) {
        column.setCellFactory(tc -> {
            TableCell<Book, T> cell = new TableCell<>() {
                @Override
                protected void updateItem(T item, boolean empty) {
                    super.updateItem(item, empty);
                    setText(empty ? null : item.toString());
                }
            };

            // 마우스 더블클릭 이벤트 추가
            cell.setOnMouseClicked(event -> {
                if (event.getClickCount() == 2 && !cell.isEmpty()) {
                    Book book = tableView.getItems().get(cell.getIndex());

                    // 입력 창 띄우기
                    TextInputDialog dialog = new TextInputDialog(cell.getText());
                    dialog.setTitle("수정");
                    dialog.setHeaderText(columnName + " 수정");
                    dialog.setContentText("새로운 값:");

                    dialog.showAndWait().ifPresent(newValue -> {
                        // 입력값을 올바른 타입으로 변환 후 적용
                        getConnection();
                        if (column == priceCol) {
                            try {
                                book.setBprice(Integer.parseInt(newValue));  // 가격은 숫자로 변환
                                update("btitle", newValue, book.getBisbn());

                            } catch (NumberFormatException e) {
                                showErrorDialog("숫자를 입력하세요.");
                                return;
                            }
                        } else if (column == titleCol) {
                            book.setBtitle(newValue);
                            update("bprice", newValue, book.getBisbn());

                        } else if (column == authorCol) {
                            book.setBauthor(newValue);
                            update("bauthor", newValue, book.getBisbn());

                        }
                        closeConnection();

                        tableView.refresh(); // 변경 사항 반영
                    });
                }
            });

            return cell;
        });
    }


    // 오류 메시지 표시
    private void showErrorDialog(String message) {
        Alert alert = new Alert(Alert.AlertType.ERROR);
        alert.setTitle("입력 오류");
        alert.setHeaderText(null);
        alert.setContentText(message);
        alert.showAndWait();
    }
}

```java
package booksearch;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import votest.vo.Book;

import java.net.URL;
import java.sql.*;
import java.util.ResourceBundle;

public class JavaFXTableViewController implements Initializable {


    private Connection con;

    @FXML
    private TableView<Book> tableView;

    @FXML
    private Button searchBtn;

    @FXML
    private MenuItem editMenuItem;  // "수정" 메뉴 추가

    @FXML
    private MenuItem deleteMenuItem;

    @FXML
    private TableColumn<Book, String> isbnCol;

    @FXML
    private TableColumn<Book, String> titleCol;

    @FXML
    private TableColumn<Book, Integer> priceCol;

    @FXML
    private TableColumn<Book, String> authorCol;

    @FXML
    private TextField inputField;



    @Override
    public void initialize(URL url, ResourceBundle resourceBundle) {
        // FXML이 LOAD될 때 메소드 호출!
        // button이 클릭되면 TableView에 데이터 넣어야 함

        // vo에 bisbn필드를 이용해서 값 채울 거임
        isbnCol.setCellValueFactory(new PropertyValueFactory<>("bisbn"));
        titleCol.setCellValueFactory(new PropertyValueFactory<>("btitle"));
        priceCol.setCellValueFactory(new PropertyValueFactory<>("bprice"));
        authorCol.setCellValueFactory(new PropertyValueFactory<>("bauthor"));

        searchBtn.setOnAction(event -> {
            getConnection();
            // input 받기
            String keyword = inputField.getText().strip();
            ObservableList<Book> books = search(keyword);
            closeConnection();

            // 화면 보여줌
            tableView.setItems(books);
        });


        // 삭제 버튼 이벤트 추가
        deleteMenuItem.setOnAction(event -> deleteSelectedRow());

        // 각 컬럼에 오른쪽 클릭으로 수정할 수 있는 기능 추가
        addDoubleClickEdit(titleCol, "책 제목");
        addDoubleClickEdit(priceCol, "책 가격");
        addDoubleClickEdit(authorCol, "책 저자");


    }

    private void getConnection() {
        try {
            Class.forName("oracle.jdbc.driver.OracleDriver"); // class가 존재하는지 확인!

            String JDBC_URL = "jdbc:oracle:thin:@localhost:1521:xe"; // jdbc:[db이름 종류]:[연결 방식]:[endpoint]:[db이름]
            String ID = "C##DEV";
            String PW = "1234";

            con = DriverManager.getConnection(JDBC_URL, ID, PW);
            System.out.println("Connection established");

        } catch (Exception e) {
            System.out.println("Connection Error occurs");
        }
    }

    private void closeConnection() {
        try {
            if (con != null) con.close();
            System.out.println("Connection close");
        } catch (SQLException e) {
            System.out.println("Connection close failed");
        }
    }

    /*
        검색 메소드
     */
    private ObservableList<Book> search(String keyword) {

        System.out.println("검색 시작");

        ObservableList<Book> books = FXCollections.observableArrayList();

        try {
            // 검색
            String sql = "SELECT bisbn, btitle, bprice, bauthor" +
                    " FROM book" +
                    " WHERE btitle LIKE ?";

            PreparedStatement pstmt = con.prepareStatement(sql);
            pstmt.setString(1, "%" + keyword + "%");

            // 결과 반환
            ResultSet rs = pstmt.executeQuery();

            while (rs.next()) {
                Book book = new Book(
                        rs.getString("bisbn"),
                        rs.getString("btitle"),
                        rs.getInt("bprice"),
                        rs.getString("bauthor")
                );

                books.add(book);
            }

            rs.close();
            pstmt.close();

            return books;

        } catch (SQLException e) {
           e.printStackTrace();
        } catch (NullPointerException e1) {
            System.out.println("NullPointerException Occurs");
        }

        return books;
    }

    // 선택된 행 삭제 메소드
    private void deleteSelectedRow() {
        Book selectedBook = tableView.getSelectionModel().getSelectedItem();
        if (selectedBook != null) {
            String bisbn = selectedBook.getBisbn();

            // DB연결 수
            getConnection();
            delete(bisbn);
            closeConnection();

            tableView.getItems().remove(selectedBook); // 삭제 완료 되면 View에서도 제거해주기

        }

    }

    private void update(String column, Object value, String isbn) {
        // ISBN이 null이 아니면 업데이트 진행
        if (isbn != null) {
            // 컬럼에 따라 업데이트할 쿼리 작성
            String sql = "UPDATE book SET " + column + " = ? WHERE bisbn = ?";

            try {
                getConnection();
                PreparedStatement pstmt = con.prepareStatement(sql);

                // 값 설정
                pstmt.setObject(1, value); // 첫 번째 ?에 값을 설정
                pstmt.setString(2, isbn);  // 두 번째 ?에 ISBN 값을 설정

                // SQL 쿼리 실행
                int rowsUpdated = pstmt.executeUpdate();

                if (rowsUpdated > 0) {
                    System.out.println("Record updated successfully");

                    // 선택된 Book 객체의 필드도 갱신
                    Book selectedBook = tableView.getSelectionModel().getSelectedItem();
                    if (selectedBook != null) {
                        if (column.equals("btitle")) {
                            selectedBook.setBtitle((String) value);
                        } else if (column.equals("bprice")) {
                            selectedBook.setBprice((Integer) value);
                        } else if (column.equals("bauthor")) {
                            selectedBook.setBauthor((String) value);
                        }
                    }

                    // TableView에 반영
                    tableView.refresh();
                }

                pstmt.close();
            } catch (SQLException e) {
                e.printStackTrace();
                showErrorDialog("업데이트 중 오류가 발생했습니다.");
            } finally {
                closeConnection();
            }
        }
    }


    private void delete(String bisbn) {
        try {
            // 검색
            String sql = "DELETE FROM book" +
                    " WHERE bisbn = ?";

            PreparedStatement pstmt = con.prepareStatement(sql);
            pstmt.setString(1, bisbn);

            // 결과 반환
            pstmt.executeUpdate();

            pstmt.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }

    }

    private <T> void addDoubleClickEdit(TableColumn<Book, T> column, String columnName) {
        column.setCellFactory(tc -> {
            TableCell<Book, T> cell = new TableCell<>() {
                @Override
                protected void updateItem(T item, boolean empty) {
                    super.updateItem(item, empty);
                    setText(empty ? null : item.toString());
                }
            };

            // 마우스 더블클릭 이벤트 추가
            cell.setOnMouseClicked(event -> {
                if (event.getClickCount() == 2 && !cell.isEmpty()) {
                    Book book = tableView.getItems().get(cell.getIndex());

                    // 입력 창 띄우기
                    TextInputDialog dialog = new TextInputDialog(cell.getText());
                    dialog.setTitle("수정");
                    dialog.setHeaderText(columnName + " 수정");
                    dialog.setContentText("새로운 값:");

                    dialog.showAndWait().ifPresent(newValue -> {
                        // 입력값을 올바른 타입으로 변환 후 적용
                        getConnection();
                        if (column == priceCol) {
                            try {
                                book.setBprice(Integer.parseInt(newValue));  // 가격은 숫자로 변환
                                update("btitle", newValue, book.getBisbn());

                            } catch (NumberFormatException e) {
                                showErrorDialog("숫자를 입력하세요.");
                                return;
                            }
                        } else if (column == titleCol) {
                            book.setBtitle(newValue);
                            update("bprice", newValue, book.getBisbn());

                        } else if (column == authorCol) {
                            book.setBauthor(newValue);
                            update("bauthor", newValue, book.getBisbn());

                        }
                        closeConnection();

                        tableView.refresh(); // 변경 사항 반영
                    });
                }
            });

            return cell;
        });
    }


    // 오류 메시지 표시
    private void showErrorDialog(String message) {
        Alert alert = new Alert(Alert.AlertType.ERROR);
        alert.setTitle("입력 오류");
        alert.setHeaderText(null);
        alert.setContentText(message);
        alert.showAndWait();
    }
}

```

```java
package booksearch;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class JavaFXTableViewEx extends Application{
    @Override
    public void start(Stage stage) throws Exception {
        // 화면 구성
        // 화면 구성을 FXML
        Parent root = null;

        FXMLLoader loader
                = new FXMLLoader(getClass().getResource("tableviewexample.fxml"));

        try {
            root = loader.load();
        } catch(Exception e) {
            e.printStackTrace();
        }

        Scene scene = new Scene(root);
        stage.setScene(scene);
        stage.show();

    }

    public static void main(String[] args) {
        launch(args);
    }
}

```

```xml
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ContextMenu?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="booksearch.JavaFXTableViewController">
   <center>
      <TableView fx:id="tableView" prefHeight="200.0" prefWidth="200.0" BorderPane.alignment="CENTER">
         <columns>
            <TableColumn fx:id="isbnCol" prefWidth="75.0" text="책 ISBN" />
            <TableColumn fx:id="titleCol" prefWidth="75.0" text="책 제목" />
            <TableColumn fx:id="priceCol" prefWidth="75.0" text="책 가격" />
            <TableColumn fx:id="authorCol" prefWidth="75.0" text="책 저자" />
         </columns>
         <contextMenu>
            <ContextMenu fx:id="contextMenu">
               <items>
                  <MenuItem fx:id="editMenuItem" text="수정" />
                  <MenuItem fx:id="deleteMenuItem" text="삭제" />
               </items>
            </ContextMenu>
         </contextMenu>
      </TableView>
   </center>
   <bottom>
      <FlowPane prefHeight="69.0" prefWidth="600.0" BorderPane.alignment="CENTER">
         <children>
            <Label text="검색어 ">
               <font>
                  <Font size="16.0" />
               </font>
               <FlowPane.margin>
                  <Insets left="50.0" top="30.0" />
               </FlowPane.margin>
            </Label>
            <TextField fx:id="inputField">
               <FlowPane.margin>
                  <Insets left="30.0" top="30.0" />
               </FlowPane.margin>
            </TextField>
            <Button fx:id="searchBtn" mnemonicParsing="false" text="검색">
               <FlowPane.margin>
                  <Insets left="30.0" top="30.0" />
               </FlowPane.margin>
            </Button>
         </children>
      </FlowPane>
   </bottom>
</BorderPane>


```
