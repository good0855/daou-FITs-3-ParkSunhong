## 데이터베이스 구성 요소

- **데이터베이스 스키마** : DB구조와 제약조건 정의
    - data type, nullable 정의, default 등
- **테이블** : 데이터를 저장하는 기본 단위
- **행, 열** : row - 데이터 항목, column : 데이터 속성
- **키**
    - Primary Key
    - Foreign Key : 다른 테이블의 key를 참조하는 것(JOIN 사용 시 유용)

## 데이터 무결성 vs 일관성

1. 데이터 무결성(Integrity) : 데이터의 정확성과 신뢰성에 중점
    - **예시**: 데이터베이스에 입력할 수 있는 값을 특정 타입으로 제한하거나, 외래 키(Foreign Key) 제약 조건을 설정하여 데이터 간의 관계를 유지하는 것이 데이터 무결성을 보장하는 방법입니다. 즉, 숫자 타입으로 지정한 컬럼에서는 숫자 값만 입력되도록 합니다. 유저마스터정보가 있고, 유저구매이력정보에 유저 식별자(ID)가 포함되어 있다면 이를 외래 키로 지정하여 유저구매이력정보가 있는 유저는 유저마스터정보가 항상 존재하도록 합니다.
    
2. 데이터 일관성(Consistency) : 데이터의 일관성과 조화에 중점
    - **예시**: 예를 들어, 같은 유저의 정보를 두 개의 다른 테이블에 저장할 때, 이름이나 주소가 변경되면 두 개의 테이블에서 같은 값으로 변경되어야 합니다. 만약 한 테이블에서는 업데이트되었지만 다른 테이블은 그렇지 않다면, "데이터 일관성이 깨졌다"라고 합니다.

## 모델링 주요 개념

1. 엔티티(Entity)
2. 속성(Attribute)
3. 관계(Relationship)
4. 키(key)
    - PK 특징
        - 불변성(pk는 가급적 변하지 않아야 한다)
        - 최소성(여러 개의 속성을 가지며 pk를 만들 수는 있음 ⇒ 이때 조합할 수 있는 속성이 최소가 되어야 한다)
5. 제약 조건
    - 데이터 무결성을 유지하기 위한 규칙
    - ex. `UNIQUE` `NOT NULL` `CHECK`
        - PK vs UNIQUE : UNIQUE는 NULL 가능

## ERD

<aside>
💡 데이터베이스 설계의 기초가 되는 다이어그램

</aside>

- 엔티티, 속성, 관계를 포함
- 작성 시 주의사항
    - 동일 속성을 여러 엔티티에 중복 정의하지 않도록 설계
    - 정규화 적용
    - 확장성 고려
    - 다대다 관계 해결
    - N:M은 1:N 관계로 분리
- 식별자 관계 : 부모 엔티티의 PK를 자식 엔티티의 PK로 사용할 수 있음
- 비식별자 관계 : 부모 엔티티의 PK가 자식 엔티티의 일반 값으로 쓰임

## ERD 명심

- 공통 코드 테이블 작성하기
    - 보통 성별 작성할 때, 0은 남자, 1은 여자 이렇게 하는데 ⇒ 단순히 이렇게 하면 모른다
    - 따라서 공동 코드를 작성해서(0=남자 / 1 = 여자) 이것을 join한다.
- 고객 등급 테이블
    - 고객 등급은 가변한다 ⇒ 회사 정책에 따라 다름(시간, 조건?)
    - 고객 등급 변하는 것
- 리뷰 테이블
    - pk 설정하기!
    - 어떤 상품에 대한 후기인지 ⇒ pk
    - 몇 번째 후기인지(sequence) ⇒ pk
